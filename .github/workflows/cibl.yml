name: CIBL Telegram Poster
on: workflow_dispatch

jobs:
  post:
    runs-on: ubuntu-latest
    steps:
      - name: Run Poster Script
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          CHAT_ID: ${{ secrets.TELEGRAM_CHANNEL_ID }}
        run: |
          # Create Python script
          cat > post.py << 'EOF'
          import os, sys, random, requests
          from datetime import datetime
          
          # Config
          TOKEN = os.getenv('BOT_TOKEN')
          CHAT = os.getenv('CHAT_ID')
          IMAGE = "https://raw.githubusercontent.com/ciblcoin/app/main/public/videos/image1.png"
          
          # Posts
          posts = [
              '''ğŸš€ CIBL MEGA AIRDROP - LIVE NOW!
          
          ğŸ”¥ Biggest Solana Airdrop!
          
          ğŸ“ 2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA
          
          âœ… Earn free tokens
          âœ… 5,000+ holders
          âœ… Lightning fast
          âœ… Transparent team
          âœ… Huge potential
          
          â° LIMITED TIME!''',
              
              '''ğŸ“ˆ CIBL PRICE UPDATE
          
          âš¡ Major movement!
          
          ğŸ“ 2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA
          
          ğŸ“Š Strong fundamentals
          ğŸš€ Growing adoption
          ğŸ‘¥ Community expanding
          ğŸ¯ New partnerships
          ğŸ”¥ Positive momentum''',
              
              '''ğŸ‘¥ CIBL COMMUNITY
          
          ğŸ’ª Strongest on Solana!
          
          ğŸ“ 2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA
          
          âœ… 24/7 discussions
          âœ… AMA sessions
          âœ… Exclusive events
          âœ… Voting rights
          âœ… Supportive''',
              
              '''ğŸ“¢ CIBL ANNOUNCEMENT
          
          ğŸŒŸ Major update!
          
          ğŸ“ 2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA
          
          âœ… New partnerships
          âœ… Roadmap updates
          âœ… Enhanced features
          âœ… Expanded team
          âœ… Marketing initiatives''',
              
              '''âœ¨ FROM STRUGGLE TO SUCCESS
          
          Our journey continues!
          
          ğŸ™ï¸ Full of friends
          ğŸ˜» Cats first in line!
          
          ğŸ’ Love TON
          ğŸ¯ Get rewarded!''',
              
              '''ğŸš€ CIBL TRENDING!
          
          Massive movements!
          
          Join revolution now!
          
          âš¡ Quick actions below''',
              
              '''âš¡ URGENT OFFER!
          
          Airdrop closing!
          
          ğŸ“ 2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA
          
          âœ… Exclusive bonus
          âœ… Limited distribution
          âœ… Community benefits
          âœ… Massive returns''',
              
              '''ğŸŒ ECOSYSTEM EXPANSION
          
          Growing fast!
          
          ğŸ“ 2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA
          
          âœ… Swap functionality
          âœ… Wallet integrations
          âœ… Token utilities
          âœ… Partnerships
          âœ… Marketing''',
              
              '''ğŸŒ CONNECT WITH CIBL
          
          âœ¨ Social network!
          
          ğŸ“ 2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA
          
          ğŸ¦ Twitter (X)
          ğŸ’¬ Telegram
          ğŸ“¸ Instagram
          ğŸ® Discord
          ğŸ“º YouTube''',
              
              '''â° FINAL 24 HOURS!
          
          Last chance!
          
          ğŸ“ 2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA
          
          âœ… Free tokens
          âœ… Bonus rewards
          âœ… Early benefits
          âœ… Membership
          âœ… Voting rights'''
          ]
          
          hashtags = [
              "#CIBL #Solana #Airdrop",
              "#CIBL #Solana #Crypto",
              "#CIBL #Community",
              "#CIBL #Announcement",
              "#CIBL #Success",
              "#CIBL #Trending",
              "#CIBL #Urgent",
              "#CIBL #Ecosystem",
              "#CIBL #Social",
              "#CIBL #Final"
          ]
          
          # Create caption
          post = random.choice(posts)
          tag = hashtags[posts.index(post)]
          time = datetime.now().strftime("%Y-%m-%d %H:%M UTC")
          
          caption = f"""<b>{post}</b>

          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          <b>ğŸš€ QUICK ACTIONS</b>
          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          
          <b>ğŸ®   ğŸ¦   ğŸ“±   ğŸ’»</b>
          
          <b>{tag}</b>
          
          <i>â° {time}</i>"""
          
          # Buttons
          buttons = {
              "inline_keyboard": [
                  [{"text": "ğŸŒ WEBSITE", "url": "https://ciblcoin.com"}],
                  [{"text": "ğŸª‚ AIRDROP", "url": "https://cbl.ag"}],
                  [{"text": "ğŸ”„ SWAP", "url": "https://phantom.com/tokens/solana/2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA?referralId=2325rur2wft"}]
              ]
          }
          
          # Send with photo
          url = f"https://api.telegram.org/bot{TOKEN}/sendPhoto"
          data = {
              "chat_id": CHAT,
              "photo": IMAGE,
              "caption": caption,
              "parse_mode": "HTML",
              "reply_markup": buttons
          }
          
          try:
              r = requests.post(url, json=data, timeout=30)
              if r.json().get('ok'):
                  print("âœ… Post published!")
                  sys.exit(0)
              else:
                  print(f"âŒ Error: {r.json()}")
                  sys.exit(1)
          except Exception as e:
              print(f"âŒ Exception: {e}")
              sys.exit(1)
          EOF
          
          # Run script
          python3 post.py