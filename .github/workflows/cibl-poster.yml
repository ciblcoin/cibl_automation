name: CIBL Telegram Post
on: workflow_dispatch

jobs:
  post:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Create and run script
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          CHAT_ID: ${{ secrets.TELEGRAM_CHANNEL_ID }}
        run: |
          # Install dependencies
          pip3 install requests
          
          # Create script file
          cat > cibl_post.py << 'EOF'
          import os
          import sys
          import random
          import requests
          from datetime import datetime
          
          # Config
          TOKEN = os.getenv('BOT_TOKEN')
          CHAT = os.getenv('CHAT_ID')
          IMAGE = "https://raw.githubusercontent.com/ciblcoin/app/main/public/videos/image1.png"
          
          # All 10 posts
          posts_data = [
              {
                  "title": "ğŸš€ CIBL MEGA AIRDROP - LIVE NOW!",
                  "content": """ğŸ”¥ Biggest Solana Airdrop Event
          
          Contract: 2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA
          
          âœ… Free tokens
          âœ… 5,000+ holders
          âœ… Fast & low fees
          âœ… Transparent team
          âœ… Huge potential
          
          â° Limited time bonus!""",
                  "hashtags": "#CIBL #Solana #Airdrop #Crypto"
              },
              {
                  "title": "ğŸ“ˆ CIBL PRICE UPDATE",
                  "content": """âš¡ Major movement detected
          
          Contract: 2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA
          
          ğŸ“Š Strong fundamentals
          ğŸš€ Growing adoption
          ğŸ‘¥ Community expanding
          ğŸ¯ New partnerships
          ğŸ”¥ Positive momentum""",
                  "hashtags": "#CIBL #Solana #Crypto #Trading"
              },
              {
                  "title": "ğŸ‘¥ CIBL COMMUNITY",
                  "content": """ğŸ’ª Strongest on Solana
          
          Contract: 2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA
          
          âœ… 24/7 discussions
          âœ… AMA sessions
          âœ… Exclusive events
          âœ… Voting rights
          âœ… Supportive team""",
                  "hashtags": "#CIBL #Community #Solana #Blockchain"
              },
              {
                  "title": "ğŸ“¢ CIBL ANNOUNCEMENT",
                  "content": """ğŸŒŸ Major updates
          
          Contract: 2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA
          
          âœ… New partnerships
          âœ… Roadmap updates
          âœ… Enhanced features
          âœ… Expanded team
          âœ… Marketing boost""",
                  "hashtags": "#CIBL #Announcement #Update #DeFi"
              },
              {
                  "title": "âœ¨ FROM STRUGGLE TO SUCCESS",
                  "content": """Our journey continues
          
          ğŸ™ï¸ City full of friends
          ğŸ˜» Cats always first!
          
          ğŸ’ Love TON blockchain
          ğŸ¯ Engage & get rewards""",
                  "hashtags": "#CIBL #Success #Crypto #TON"
              },
              {
                  "title": "ğŸš€ CIBL IS TRENDING",
                  "content": """Massive movements!
          
          Join the revolution
          Be part of change
          
          Early adopters win
          Don't miss out!""",
                  "hashtags": "#CIBL #Trending #Solana #Crypto"
              },
              {
                  "title": "âš¡ URGENT OFFER",
                  "content": """Airdrop closing soon!
          
          Contract: 2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA
          
          âœ… Exclusive bonus
          âœ… Limited distribution
          âœ… Community benefits
          âœ… Massive returns
          
          â° Last chance!""",
                  "hashtags": "#CIBL #Urgent #Airdrop #Limited"
              },
              {
                  "title": "ğŸŒ CIBL ECOSYSTEM",
                  "content": """Growing fast
          
          Contract: 2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA
          
          âœ… Swap functionality
          âœ… Wallet integrations
          âœ… Token utilities
          âœ… New partnerships
          âœ… Marketing push""",
                  "hashtags": "#CIBL #Ecosystem #Growth #Web3"
              },
              {
                  "title": "ğŸŒ CONNECT WITH CIBL",
                  "content": """Join social network
          
          Contract: 2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA
          
          ğŸ¦ Twitter/X updates
          ğŸ’¬ Telegram chats
          ğŸ“¸ Instagram visuals
          ğŸ® Discord community
          ğŸ“º YouTube tutorials""",
                  "hashtags": "#CIBL #Social #Network #Community"
              },
              {
                  "title": "â° FINAL 24 HOURS",
                  "content": """Last opportunity!
          
          Contract: 2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA
          
          âœ… Free CIBL tokens
          âœ… Bonus rewards
          âœ… Early benefits
          âœ… Membership perks
          âœ… Voting rights""",
                  "hashtags": "#CIBL #Final #Airdrop #LastChance"
              }
          ]
          
          # Select random post
          post = random.choice(posts_data)
          
          # Social icons
          icons = ["ğŸ®", "ğ•", "ğŸ“±", "ğŸ’»", "ğŸ¦", "ğŸª", "ğŸ‘¾", "ğŸ•¹ï¸"]
          selected = random.sample(icons, 4)
          
          # Create caption with full width separators
          separator = "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          
          caption = f"""<b>{post['title']}</b>

  {post['content']}

  {separator}
  <b>ğŸš€ QUICK ACTIONS</b>
  {separator}

  <b>{'   |   '.join(selected)}</b>

  <b>{post['hashtags']}</b>

  <i>Posted: {datetime.now().strftime("%Y-%m-%d %H:%M UTC")}</i>"""
          
          # Create 3 full-width buttons
          buttons = {
              "inline_keyboard": [
                  [{"text": "ğŸŒ WEBSITE - ciblcoin.com", "url": "https://ciblcoin.com"}],
                  [{"text": "ğŸª‚ AIRDROP - cbl.ag", "url": "https://cbl.ag"}],
                  [{"text": "ğŸ”„ SWAP TOKEN - Phantom", "url": "https://phantom.com/tokens/solana/2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA?referralId=2325rur2wft"}]
              ]
          }
          
          # Send to Telegram
          url = f"https://api.telegram.org/bot{TOKEN}/sendPhoto"
          payload = {
              "chat_id": CHAT,
              "photo": IMAGE,
              "caption": caption,
              "parse_mode": "HTML",
              "reply_markup": buttons
          }
          
          try:
              response = requests.post(url, json=payload, timeout=30)
              result = response.json()
              
              if result.get('ok'):
                  print("âœ… Success! Post published to @CiBLofficial")
                  print(f"ğŸ“± Message ID: {result['result']['message_id']}")
                  print(f"ğŸ¯ Post type: {post['title'].split()[0]}")
                  print(f"ğŸ“… Time: {datetime.now().strftime('%H:%M')}")
                  sys.exit(0)
              else:
                  print(f"âŒ Telegram error: {result.get('description')}")
                  sys.exit(1)
                  
          except Exception as e:
              print(f"âŒ Network error: {str(e)}")
              sys.exit(1)
          EOF
          
          # Run the script
          python3 cibl_post.py
          
      - name: Completion
        run: |
          echo " "
          echo "ğŸ‰ Process completed!"
          echo "ğŸ“¢ Check @CiBLofficial channel"
          echo "ğŸ¤– Bot: @CIBtokenBot"
          echo " "