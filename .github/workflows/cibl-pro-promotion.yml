name: CIBL Professional Promotion

on:
  workflow_dispatch:
    inputs:
      post_type:
        description: 'Select promotion type'
        required: true
        default: 'airdrop'
        type: choice
        options:
          - airdrop
          - price_chart
          - social_media
          - full_promo

env:
  CHANNEL: "@CIBLOfficial"
  CONTRACT: "2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA"
  CIBL_IMAGE: "https://raw.githubusercontent.com/ciblcoin/app/main/public/videos/image1.png"
  CURRENT_PRICE: "$0.000000008873"

jobs:
  send-promotion:
    runs-on: ubuntu-latest
    
    steps:
      - name: Get Live Price Data
        id: market_data
        run: |
          echo "ğŸ“Š Fetching live market data..."
          # Ø§Ø² API Ø³Ø§Ø¯Ù‡â€ŒØªØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
          response=$(curl -s "https://api.dexscreener.com/latest/dex/tokens/$CONTRACT")
          
          price=$(echo $response | jq -r '.pairs[0].priceUsd // "0.000000008873"')
          change=$(echo $response | jq -r '.pairs[0].priceChange.h24 // "0.00"')
          volume=$(echo $response | jq -r '.pairs[0].volume.h24 // "0"')
          
          # ÙØ±Ù…Øªâ€ŒØ¨Ù†Ø¯ÛŒ Ø§Ø¹Ø¯Ø§Ø¯
          if [ "$price" != "0.000000008873" ]; then
            formatted_price="\$$(printf "%.11f" $price)"
          else
            formatted_price="$CURRENT_PRICE"
          fi
          
          if (( $(echo "$change >= 0" | bc -l 2>/dev/null) )); then
            formatted_change="ğŸŸ¢ +$change%"
          else
            formatted_change="ğŸ”´ $change%"
          fi
          
          formatted_volume="\$$(printf "%'.0f" $volume 2>/dev/null || echo "0")"
          
          echo "price=$formatted_price" >> $GITHUB_OUTPUT
          echo "change=$formatted_change" >> $GITHUB_OUTPUT
          echo "volume=$formatted_volume" >> $GITHUB_OUTPUT
          echo "chart_url=https://dexscreener.com/solana/$CONTRACT?embed=1&t=2592000" >> $GITHUB_OUTPUT
          
          echo "âœ… Live data fetched"

      - name: Send Airdrop Promotion
        if: github.event.inputs.post_type == 'airdrop'
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        run: |
          curl -X POST \
            -H "Content-Type: application/json" \
            -d '{
              "chat_id": "@CIBLOfficial",
              "photo": "'"$CIBL_IMAGE"'",
              "caption": "<b>ğŸŒŠğŸš€ CIBL MEGA AIRDROP WAVE IS HERE! ğŸš€ğŸŒŠ</b><br><br><i>ã€°ï¸ã€°ï¸ã€°ï¸ Join the Biggest Crypto Wave on Solana! ã€°ï¸ã€°ï¸ã€°ï¸</i><br><br>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br><br><b>ğŸŒ LIVE TOKEN DATA:</b><br>ğŸ’° <b>Current Price:</b> '"${{ steps.market_data.outputs.price }}"'<br>ğŸ“ˆ <b>24h Change:</b> '"${{ steps.market_data.outputs.change }}"'<br>ğŸ“Š <b>24h Volume:</b> '"${{ steps.market_data.outputs.volume }}"'<br><br><b>ğŸ“ SMART CONTRACT:</b><br><code>2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA</code><br><br>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br><br><b>ğŸ¯ ã€°ï¸ WHY CIBL TOKEN? ã€°ï¸</b><br>ğŸŒŠ <b>Algorithmic Growth</b> â€“ Advanced tokenomics<br>ğŸŒŠ <b>Liquidity Waves</b> â€“ Sustainable ecosystem<br>ğŸŒŠ <b>Community Algorithms</b> â€“ Holder rewards system<br>ğŸŒŠ <b>Price Wave Predictor</b> â€“ AI-driven analytics<br>ğŸŒŠ <b>Multi-chain Bridges</b> â€“ Cross-platform expansion<br><br><b>ğŸš€ ã€°ï¸ AIRDROP WAVE FEATURES ã€°ï¸</b><br>âœ… <b>Massive Token Distribution</b><br>âœ… <b>Staking Wave Rewards</b><br>âœ… <b>Liquidity Pool Bonuses</b><br>âœ… <b>Early Wave Participant Benefits</b><br><br><b>â° ã€°ï¸ LIMITED WAVE OPPORTUNITY! ã€°ï¸</b><br><br>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br><br><b>ğŸŒã€°ï¸ SOCIAL WAVES ã€°ï¸ğŸŒ</b><br>ğŸ¦ Twitter | ğŸ’¬ Telegram | ğŸ“¸ Instagram<br>ğŸ® Discord | ğŸ“º YouTube<br><br>#CIBL #Solana #AirdropWave #CryptoWave #Algorithm #DeFi #Web3 #Blockchain #Memecoin",
              "parse_mode": "HTML",
              "reply_markup": {
                "inline_keyboard": [
                  [
                    {"text": "ğŸŒŠ Join Airdrop", "url": "https://cbl.ag"},
                    {"text": "ğŸ“ˆ Live Chart", "url": "'"${{ steps.market_data.outputs.chart_url }}"'"}
                  ],
                  [
                    {"text": "ğŸŒ Website", "url": "https://ciblcoin.com"},
                    {"text": "ğŸ’¬ Community", "url": "https://t.me/CIBLcoin"}
                  ]
                ]
              }
            }' \
            https://api.telegram.org/bot$BOT_TOKEN/sendPhoto

      - name: Send Price Chart Promotion
        if: github.event.inputs.post_type == 'price_chart'
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        run: |
          curl -X POST \
            -H "Content-Type: application/json" \
            -d '{
              "chat_id": "@CIBLOfficial",
              "photo": "'"$CIBL_IMAGE"'",
              "caption": "<b>ğŸ“Šã€°ï¸ CIBL PRICE ANALYSIS & CHARTS ã€°ï¸ğŸ“Š</b><br><br><i>ã€°ï¸ã€°ï¸ã€°ï¸ 1-Month Price Wave Analysis ã€°ï¸ã€°ï¸ã€°ï¸</i><br><br>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br><br><b>ğŸ“ˆ LIVE PRICE DATA:</b><br>ğŸ’° <b>Current Price:</b> '"${{ steps.market_data.outputs.price }}"'<br>ğŸ“Š <b>24h Change:</b> '"${{ steps.market_data.outputs.change }}"'<br>ğŸ’ <b>Market Status:</b> Early Growth Phase<br>ğŸš€ <b>Growth Potential:</b> 1000x+ Opportunity<br><br><b>ğŸ“‰ 1-MONTH CHART ANALYSIS:</b><br>ğŸŒŠ <b>Price Wave Pattern:</b> Bullish formation<br>ğŸŒŠ <b>Support Levels:</b> Strong foundation<br>ğŸŒŠ <b>Resistance Break:</b> Imminent breakout<br>ğŸŒŠ <b>Volume Wave:</b> Increasing momentum<br>ğŸŒŠ <b>Algorithm Signal:</b> Buy indication<br><br><b>ğŸ¯ SMART CONTRACT:</b><br><code>2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA</code><br><br>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br><br><b>ğŸ”® ã€°ï¸ PRICE WAVE PREDICTION ã€°ï¸</b><br>âœ… <b>Short-term:</b> Consolidation phase<br>âœ… <b>Mid-term:</b> Upward trajectory<br>âœ… <b>Long-term:</b> Exponential growth<br>âœ… <b>Targets:</b> Multiple milestones ahead<br><br><b>ğŸ¤– ã€°ï¸ ALGORITHMIC INSIGHTS ã€°ï¸</b><br>ğŸŒ AI-driven price prediction models<br>ğŸŒ Liquidity wave analysis tools<br>ğŸŒ Community sentiment algorithms<br>ğŸŒ Market trend wave detectors<br><br><b>â° ã€°ï¸ TIME TO RIDE THE WAVE! ã€°ï¸</b><br><br>#CIBL #Solana #PriceChart #TechnicalAnalysis #Trading #Crypto #Investing #DeFi",
              "parse_mode": "HTML",
              "reply_markup": {
                "inline_keyboard": [
                  [
                    {"text": "ğŸ“Š View Live Chart", "url": "'"${{ steps.market_data.outputs.chart_url }}"'"},
                    {"text": "ğŸ“ˆ Price Analysis", "url": "https://dexscreener.com/solana/2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA"}
                  ],
                  [
                    {"text": "ğŸŒŠ Buy CIBL", "url": "https://dexscreener.com/solana/2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA"},
                    {"text": "ğŸŒ Website", "url": "https://ciblcoin.com"}
                  ]
                ]
              }
            }' \
            https://api.telegram.org/bot$BOT_TOKEN/sendPhoto

      - name: Send Social Media Promotion
        if: github.event.inputs.post_type == 'social_media'
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        run: |
          curl -X POST \
            -H "Content-Type: application/json" \
            -d '{
              "chat_id": "@CIBLOfficial",
              "photo": "'"$CIBL_IMAGE"'",
              "caption": "<b>ğŸŒã€°ï¸ JOIN CIBL SOCIAL WAVE! ã€°ï¸ğŸŒ</b><br><br><i>ã€°ï¸ã€°ï¸ã€°ï¸ Connect Across All Platforms ã€°ï¸ã€°ï¸ã€°ï¸</i><br><br>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br><br><b>ğŸ“ SMART CONTRACT:</b><br><code>2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA</code><br><br><b>ğŸ’° CURRENT PRICE:</b> '"${{ steps.market_data.outputs.price }}"'<br><b>ğŸ“ˆ 24H CHANGE:</b> '"${{ steps.market_data.outputs.change }}"'<br><br>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br><br><b>ğŸŒŠã€°ï¸ SOCIAL MEDIA WAVES ã€°ï¸ğŸŒŠ</b><br><br><b>ğŸ¦ TWITTER (X):</b><br>â€¢ Latest announcements & updates<br>â€¢ Community engagement<br>â€¢ Market insights<br>â€¢ Live discussions<br><br><b>ğŸ’¬ TELEGRAM:</b><br>â€¢ 24/7 active community<br>â€¢ Real-time support<br>â€¢ Exclusive content<br>â€¢ Group discussions<br><br><b>ğŸ“¸ INSTAGRAM:</b><br>â€¢ Visual content<br>â€¢ Community highlights<br>â€¢ Story updates<br>â€¢ Graphic designs<br><br><b>ğŸ® DISCORD:</b><br>â€¢ Advanced discussions<br>â€¢ Developer chats<br>â€¢ Voice channels<br>â€¢ Special events<br><br><b>ğŸ“º YOUTUBE:</b><br>â€¢ Tutorial videos<br>â€¢ AMA recordings<br>â€¢ Educational content<br>â€¢ Project updates<br><br>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br><br><b>ğŸš€ã€°ï¸ GROW WITH OUR COMMUNITY! ã€°ï¸ğŸš€</b><br><br>#CIBL #Solana #SocialMedia #Community #Crypto #Network #Web3 #Blockchain",
              "parse_mode": "HTML",
              "reply_markup": {
                "inline_keyboard": [
                  [
                    {"text": "ğŸ¦ Twitter (X)", "url": "https://x.com/CiblCrypto"},
                    {"text": "ğŸ’¬ Telegram", "url": "https://t.me/CIBLcoin"}
                  ],
                  [
                    {"text": "ğŸ“¸ Instagram", "url": "https://www.instagram.com/ciblcoin"},
                    {"text": "ğŸ® Discord", "url": "https://discord.gg/9HeTsHJcTq"}
                  ],
                  [
                    {"text": "ğŸ“º YouTube", "url": "https://www.youtube.com/@ciblcoin"},
                    {"text": "ğŸŒ Website", "url": "https://ciblcoin.com"}
                  ]
                ]
              }
            }' \
            https://api.telegram.org/bot$BOT_TOKEN/sendPhoto

      - name: Send Full Promotion
        if: github.event.inputs.post_type == 'full_promo'
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        run: |
          curl -X POST \
            -H "Content-Type: application/json" \
            -d '{
              "chat_id": "@CIBLOfficial",
              "photo": "'"$CIBL_IMAGE"'",
              "caption": "<b>ğŸŒŠğŸš€ã€°ï¸ CIBL COMPLETE ECOSYSTEM ã€°ï¸ğŸš€ğŸŒŠ</b><br><br><i>ã€°ï¸ã€°ï¸ã€°ï¸ The Ultimate Solana Token Experience ã€°ï¸ã€°ï¸ã€°ï¸</i><br><br>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br><br><b>ğŸ“Š REAL-TIME MARKET DATA:</b><br>ğŸ’° <b>Live Price:</b> '"${{ steps.market_data.outputs.price }}"'<br>ğŸ“ˆ <b>24h Performance:</b> '"${{ steps.market_data.outputs.change }}"'<br>ğŸ“Š <b>Trading Volume:</b> '"${{ steps.market_data.outputs.volume }}"'<br>ğŸ¯ <b>Market Phase:</b> Early Adoption Wave<br><br><b>ğŸ“ OFFICIAL CONTRACT:</b><br><code>2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA</code><br><br>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br><br><b>ğŸ¤–ã€°ï¸ ADVANCED ALGORITHMS ã€°ï¸ğŸ¤–</b><br>ğŸŒŠ <b>Dynamic Tokenomics</b> â€“ Adaptive supply<br>ğŸŒŠ <b>Liquidity Wave System</b> â€“ Automated pools<br>ğŸŒŠ <b>Price Stability Algorithm</b> â€“ Anti-dump<br>ğŸŒŠ <b>Community Reward Algorithm</b> â€“ Fair distribution<br>ğŸŒŠ <b>Cross-chain Bridge AI</b> â€“ Multi-network<br><br><b>ğŸš€ã€°ï¸ ECOSYSTEM FEATURES ã€°ï¸ğŸš€</b><br>âœ… <b>Massive Airdrop Program</b><br>âœ… <b>Staking & Farming Pools</b><br>âœ… <b>NFT Integration Platform</b><br>âœ… <b>DAO Governance System</b><br>âœ… <b>Mobile Wallet Support</b><br><br><b>ğŸŒã€°ï¸ SOCIAL WAVE NETWORK ã€°ï¸ğŸŒ</b><br>ğŸ¦ Twitter | ğŸ’¬ Telegram | ğŸ“¸ Instagram<br>ğŸ® Discord | ğŸ“º YouTube | ğŸŒ Website<br><br>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br><br><b>ğŸ¯ã€°ï¸ INVESTMENT HIGHLIGHTS ã€°ï¸ğŸ¯</b><br>â€¢ Early-stage gem with 1000x potential<br>â€¢ Strong community-driven development<br>â€¢ Transparent and doxxed team<br>â€¢ Regular updates and improvements<br>â€¢ Strategic partnership pipeline<br><br><b>â°ã€°ï¸ JOIN THE WAVE NOW! ã€°ï¸â°</b><br><br>#CIBL #Solana #Ecosystem #Algorithm #Airdrop #DeFi #Web3 #Crypto #Blockchain #Investment",
              "parse_mode": "HTML",
              "reply_markup": {
                "inline_keyboard": [
                  [
                    {"text": "ğŸŒŠ Join Airdrop", "url": "https://cbl.ag"},
                    {"text": "ğŸ“Š Live Chart", "url": "'"${{ steps.market_data.outputs.chart_url }}"'"}
                  ],
                  [
                    {"text": "ğŸŒ Website", "url": "https://ciblcoin.com"},
                    {"text": "ğŸ’¬ Community", "url": "https://t.me/CIBLcoin"}
                  ],
                  [
                    {"text": "ğŸ¦ Twitter (X)", "url": "https://x.com/CiblCrypto"},
                    {"text": "ğŸ“¸ Instagram", "url": "https://www.instagram.com/ciblcoin"}
                  ],
                  [
                    {"text": "ğŸ® Discord", "url": "https://discord.gg/9HeTsHJcTq"},
                    {"text": "ğŸ“º YouTube", "url": "https://www.youtube.com/@ciblcoin"}
                  ]
                ]
              }
            }' \
            https://api.telegram.org/bot$BOT_TOKEN/sendPhoto

      - name: Notify Admin
        if: always()
        env:
          BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        run: |
          if [ -n "${{ secrets.ADMIN_CHAT_ID }}" ]; then
            curl -X POST \
              -H "Content-Type: application/json" \
              -d "{
                \"chat_id\": \"${{ secrets.ADMIN_CHAT_ID }}\",
                \"text\": \"âœ… CIBL Professional Promotion Sent!\\n\\nType: ${{ github.event.inputs.post_type }}\\nChannel: @CIBLOfficial\\nImage: $CIBL_IMAGE\\nPrice: '"${{ steps.market_data.outputs.price }}"'\\nTime: $(date '+%H:%M:%S')\",
                \"parse_mode\": \"HTML\"
              }" \
              https://api.telegram.org/bot$BOT_TOKEN/sendMessage || true
          fi