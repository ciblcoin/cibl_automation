name: CIBL Telegram Auto-Poster
on:
  # Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±: Ù‡Ø± 4 Ø³Ø§Ø¹Øª
  schedule:
    - cron: '0 */4 * * *'  # Ø¯Ù‚ÛŒÙ‚Ù‡ 0ØŒ Ù‡Ø± 4 Ø³Ø§Ø¹ØªØŒ Ù‡Ø± Ø±ÙˆØ²
  # Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø³ØªÛŒ
  workflow_dispatch:
    inputs:
      post_number:
        description: 'Ø´Ù…Ø§Ø±Ù‡ Ù¾Ø³Øª Ø®Ø§Øµ (1-10) ÛŒØ§ 0 Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ ØªØµØ§Ø¯ÙÛŒ'
        required: true
        default: '0'
        type: string
      post_type:
        description: 'Ù†ÙˆØ¹ Ù¾Ø³Øª'
        required: false
        default: 'random'
        type: choice
        options:
          - random
          - airdrop
          - announcement
          - price
          - community
          - short
          - regular

jobs:
  post-to-telegram:
    runs-on: ubuntu-latest
    name: Ù¾Ø³Øª Ø¨Ù‡ Ú©Ø§Ù†Ø§Ù„ ØªÙ„Ú¯Ø±Ø§Ù…
    steps:
      - name: Ø¯Ø±ÛŒØ§ÙØª Ú©Ø¯
        uses: actions/checkout@v3

      - name: ØªÙ†Ø¸ÛŒÙ… Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: Ù†ØµØ¨ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§
        run: |
          python -m pip install --upgrade pip
          pip install python-telegram-bot==20.3
          pip install requests

      - name: Ø¨Ø±Ø±Ø³ÛŒ Ù…Ù‚Ø§Ø¯ÛŒØ± Secrets
        run: |
          echo "ðŸ” Ø¨Ø±Ø±Ø³ÛŒ Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…Ø®ÙÛŒ..."
          if [ -z "${{ secrets.TELEGRAM_BOT_TOKEN }}" ]; then
            echo "âŒ TELEGRAM_BOT_TOKEN ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯Ù‡!"
            exit 1
          fi
          if [ -z "${{ secrets.TELEGRAM_CHANNEL_ID }}" ]; then
            echo "âŒ TELEGRAM_CHANNEL_ID ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯Ù‡!"
            exit 1
          fi
          echo "âœ… Ù‡Ù…Ù‡ Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…Ø®ÙÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù‡Ø³ØªÙ†Ø¯"
          echo "Ø·ÙˆÙ„ ØªÙˆÚ©Ù†: ${#TELEGRAM_BOT_TOKEN}"
          echo "Ø¢ÛŒØ¯ÛŒ Ú©Ø§Ù†Ø§Ù„: ${{ secrets.TELEGRAM_CHANNEL_ID }}"

      - name: Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ
        run: |
          cat > config.py << 'EOF'
          import os
          
          # ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…
          BOT_TOKEN = os.getenv('TELEGRAM_BOT_TOKEN')
          CHANNEL_ID = os.getenv('TELEGRAM_CHANNEL_ID')
          
          # ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ
          SCHEDULE_INTERVAL = 4  # Ø³Ø§Ø¹Øª
          
          # Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…ØªØ­Ø±Ú©
          EMOJIS = {
              'success': ['âœ…', 'ðŸŽ¯', 'ðŸš€', 'âœ¨', 'ðŸ’Ž', 'ðŸ”¥', 'ðŸŒŸ', 'âš¡', 'ðŸŽ‰'],
              'warning': ['âš ï¸', 'ðŸ“¢', 'ðŸ””', 'ðŸ“£'],
              'error': ['âŒ', 'ðŸš¨', 'ðŸ’¥', 'ðŸ”´'],
              'social': ['ðŸŽ®', 'ð•', 'ðŸ“±', 'ðŸ’»', 'ðŸ¦', 'ðŸŽª', 'ðŸ‘¾', 'ðŸ•¹ï¸'],
              'action': ['ðŸŒ', 'ðŸª‚', 'ðŸ”„', 'ðŸ”¥', 'âœ¨', 'ðŸ’Ž', 'ðŸŽ¯', 'ðŸ’°', 'âš¡', 'ðŸŽ', 'ðŸš€']
          }
          
          # Ù‡Ø´ØªÚ¯â€ŒÙ‡Ø§
          HASHTAGS = [
              '#CIBL', '#Solana', '#Crypto', '#DeFi', '#Blockchain',
              '#Airdrop', '#Web3', '#Memecoin', '#Trading', '#Investing',
              '#Community', '#Announcement', '#Update', '#Network'
          ]
          EOF
          echo "âœ… ÙØ§ÛŒÙ„ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯"

      - name: Ø§ÛŒØ¬Ø§Ø¯ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù¾Ø³Øªâ€ŒÚ©Ù†Ù†Ø¯Ù‡
        run: |
          cat > telegram_poster.py << 'EOF'
          #!/usr/bin/env python3
          """
          CIBL Telegram Auto-Poster
          Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù†Ø§Ù„ @CiBLofficial
          """
          
          import os
          import sys
          import random
          from datetime import datetime
          import requests
          import json
          
          # Ø§ÛŒÙ…Ù¾ÙˆØ±Øª ØªÙ†Ø¸ÛŒÙ…Ø§Øª
          try:
              from config import BOT_TOKEN, CHANNEL_ID, EMOJIS, HASHTAGS
          except ImportError:
              BOT_TOKEN = os.getenv('TELEGRAM_BOT_TOKEN')
              CHANNEL_ID = os.getenv('TELEGRAM_CHANNEL_ID')
              EMOJIS = {
                  'success': ['âœ…', 'ðŸŽ¯', 'ðŸš€', 'âœ¨', 'ðŸ’Ž', 'ðŸ”¥', 'ðŸŒŸ', 'âš¡', 'ðŸŽ‰'],
                  'social': ['ðŸŽ®', 'ð•', 'ðŸ“±', 'ðŸ’»', 'ðŸ¦', 'ðŸŽª', 'ðŸ‘¾', 'ðŸ•¹ï¸'],
                  'action': ['ðŸŒ', 'ðŸª‚', 'ðŸ”„', 'ðŸ”¥', 'âœ¨', 'ðŸ’Ž', 'ðŸŽ¯', 'ðŸ’°', 'âš¡', 'ðŸŽ', 'ðŸš€']
              }
              HASHTAGS = ['#CIBL', '#Solana', '#Crypto', '#DeFi', '#Blockchain']
          
          # Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ù¾Ø³Øªâ€ŒÙ‡Ø§ - ØªÙ…Ø§Ù…Ø§Ù‹ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ
          POSTS_DATABASE = [
              {
                  "id": 1,
                  "type": "airdrop",
                  "title": "ðŸš€ CIBL MEGA AIRDROP - LIVE NOW! ðŸš€",
                  "content": """ðŸ”¥ The Biggest Airdrop Event on Solana Network!

ðŸ“ Contract Address:
`2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA`

ðŸŽ¯ WHY CIBL TOKEN?
âœ… Massive Airdrop Rewards - Earn free tokens
âœ… Strong Community - 5,000+ holders & growing
âœ… Solana Network - Lightning fast, ultra low fees
âœ… Transparent Team - Fully doxxed & committed
âœ… Innovative Tokenomics - Sustainable growth model
âœ… Huge Potential - Early stage gem with massive upside

ðŸ”¥ LIMITED TIME OPPORTUNITY!
Early participants receive exclusive bonus rewards!

â° DON'T WAIT - JOIN THE REVOLUTION NOW!""",
                  "hashtags": "#CIBL #Solana #Airdrop #Crypto #DeFi #Memecoin"
              },
              {
                  "id": 2,
                  "type": "price",
                  "title": "ðŸ“ˆ CIBL PRICE UPDATE â€“ TRENDING ON SOLANA! ðŸ“ˆ",
                  "content": """âš¡ Major Price Movement Detected â€“ Don't Miss Out!

ðŸ’° Current Price: Showing strong momentum
ðŸ“Š 24h Volume: Increasing rapidly

ðŸ“ Contract Address:
`2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA`

ðŸš€ WHY CIBL IS MOVING?
ðŸ“Š Strong fundamentals and growing adoption
ðŸš€ Increasing trading volume and liquidity
ðŸ‘¥ Rapid community expansion
ðŸŽ¯ Strategic partnerships in development
ðŸ”¥ Positive market sentiment and momentum

ðŸ’Ž INVESTMENT OPPORTUNITY:
â€¢ Early stage project with massive potential
â€¢ Limited token supply available
â€¢ Growing ecosystem integration
â€¢ Upcoming exchange listings
â€¢ Marketing campaigns underway""",
                  "hashtags": "#CIBL #Solana #Crypto #Trading #Investing #Web3"
              },
              {
                  "id": 3,
                  "type": "community",
                  "title": "ðŸ‘¥ JOIN 5,000+ CIBL HOLDERS COMMUNITY! ðŸ‘¥",
                  "content": """ðŸ’ª Strongest & Fastest Growing Community on Solana!

ðŸ“ CONTRACT ADDRESS:
`2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA`

ðŸ¤ COMMUNITY BENEFITS:
âœ… Active discussions 24/7
âœ… Regular AMA sessions with team
âœ… Exclusive community events
âœ… Early access to announcements
âœ… Voting rights on decisions
âœ… Supportive environment

ðŸŒŸ WHY OUR COMMUNITY STANDS OUT:
âœ¨ Genuine engagement and real conversations
âœ¨ Helpful members always ready to assist
âœ¨ Educational content for all levels
âœ¨ Positive and encouraging atmosphere
âœ¨ Strong sense of unity and common goals

ðŸš€ JOIN THE MOVEMENT TODAY!""",
                  "hashtags": "#CIBL #Solana #Community #Crypto #Blockchain"
              },
              {
                  "id": 4,
                  "type": "announcement",
                  "title": "ðŸ“¢ IMPORTANT CIBL ANNOUNCEMENT ðŸ“¢",
                  "content": """ðŸŒŸ Major Update for All CIBL Community Members!

ðŸ“ CONTRACT ADDRESS:
`2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA`

ðŸŽ¯ ANNOUNCEMENT DETAILS:
âœ… New strategic partnerships secured
âœ… Roadmap updates and future developments
âœ… Enhanced token utility and features
âœ… Expanded team with industry experts
âœ… Improved website and documentation
âœ… Upcoming marketing initiatives

ðŸš€ WHAT THIS MEANS FOR YOU:
âœ¨ Increased token value and utility
âœ¨ Greater exposure and recognition
âœ¨ More opportunities for rewards
âœ¨ Enhanced platform features
âœ¨ Stronger market position
âœ¨ Better user experience

â° STAY TUNED FOR MORE UPDATES!""",
                  "hashtags": "#CIBL #Solana #Announcement #Update #DeFi"
              },
              {
                  "id": 5,
                  "type": "regular",
                  "title": "âœ¨ FROM STRUGGLE TO SUCCESS âœ¨",
                  "content": """Our friends made an incredible journey - now it's your turn!

ðŸ™ï¸ Their city is full of animal friends, but cats are always first in line!

ðŸ’Ž Time to fall in love with TON. Stay tuned, engage, and get rewarded!

ðŸŽ¯ Quick Action Buttons Below â¬‡ï¸""",
                  "hashtags": "#Transformation #Crypto #TON #Success #CIBL"
              },
              {
                  "id": 6,
                  "type": "short",
                  "title": "ðŸš€ CIBL IS TRENDING! ðŸš€",
                  "content": """Massive movements detected
Join the revolution now!

âš¡ Quick Actions:""",
                  "hashtags": "#CIBL #Solana #Crypto #Trending"
              },
              {
                  "id": 7,
                  "type": "airdrop",
                  "title": "âš¡ URGENT: LIMITED TIME OFFER! âš¡",
                  "content": """CIBL Airdrop closing soon!
Last chance to claim bonus rewards!

ðŸ“ Contract Address:
`2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA`

ðŸŽ¯ DON'T MISS OUT:
âœ… Exclusive bonus for early participants
âœ… Limited token distribution
âœ… Growing community benefits
âœ… Potential for massive returns

â° ACT BEFORE IT'S TOO LATE!""",
                  "hashtags": "#CIBL #Airdrop #Urgent #LimitedTime #Crypto"
              },
              {
                  "id": 8,
                  "type": "announcement",
                  "title": "ðŸŒ CIBL ECOSYSTEM EXPANSION ðŸŒ",
                  "content": """Growing beyond expectations!
New integrations and partnerships live.

ðŸ“ CONTRACT ADDRESS:
`2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA`

ðŸŒŸ NEW ADDITIONS:
âœ… Enhanced swap functionality
âœ… Additional wallet integrations
âœ… Expanded token utilities
âœ… New partnership announcements
âœ… Community feature upgrades
âœ… Marketing campaign expansion

ðŸš€ BE PART OF OUR GROWTH STORY!""",
                  "hashtags": "#CIBL #Ecosystem #Growth #Solana #Web3"
              },
              {
                  "id": 9,
                  "type": "community",
                  "title": "ðŸŒ CONNECT WITH CIBL ACROSS ALL PLATFORMS! ðŸŒ",
                  "content": """âœ¨ Join Our Growing Social Media Network! âœ¨

ðŸ“ Contract Address:
`2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA`

ðŸ“± FOLLOW US EVERYWHERE:
ðŸ¦ Twitter (X): Latest announcements
ðŸ’¬ Telegram: 24/7 community discussions
ðŸ“¸ Instagram: Visual content & highlights
ðŸŽ® Discord: Advanced discussions
ðŸ“º YouTube: Tutorials & educational content

ðŸ”— STAY UPDATED WITH EVERY DEVELOPMENT!""",
                  "hashtags": "#CIBL #Solana #SocialMedia #Community #Network"
              },
              {
                  "id": 10,
                  "type": "airdrop",
                  "title": "â° FINAL 24 HOURS! â°",
                  "content": """CIBL Mega Airdrop closing soon!
Last opportunity for bonus rewards!

ðŸ”¥ WHAT YOU GET:
âœ… Free CIBL tokens
âœ… Exclusive bonus rewards
âœ… Early adopter benefits
âœ… Community membership
âœ… Future airdrop eligibility
âœ… Voting rights

ðŸŽ¯ CONTRACT ADDRESS:
`2Lpgt5teMe4SPp1G8x1URBk6dPRoimftdANmAsFDvkPA`

ðŸ’Ž DON'T REGRET MISSING OUT!""",
                  "hashtags": "#CIBL #FinalHours #Airdrop #LastChance #Crypto"
              }
          ]
          
          class CIBLTelegramPoster:
              def __init__(self):
                  self.bot_token = BOT_TOKEN
                  self.channel_id = CHANNEL_ID
                  self.base_url = f"https://api.telegram.org/bot{self.bot_token}"
                  
                  # ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ÛŒ workflow
                  self.post_number = os.getenv('POST_NUMBER', '0')
                  self.post_type = os.getenv('POST_TYPE', 'random')
                  
                  print(f"ðŸ”§ Initializing CIBL Poster...")
                  print(f"ðŸ“Š Post Number: {self.post_number}")
                  print(f"ðŸ“ Post Type: {self.post_type}")
                  print(f"ðŸ“¢ Channel ID: {self.channel_id}")
              
              def get_random_emoji(self, category='success'):
                  """Ú¯Ø±ÙØªÙ† Ø§ÛŒÙ…ÙˆØ¬ÛŒ ØªØµØ§Ø¯ÙÛŒ Ø§Ø² Ø¯Ø³ØªÙ‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø±"""
                  if category in EMOJIS:
                      return random.choice(EMOJIS[category])
                  return random.choice(EMOJIS['success'])
              
              def generate_buttons_section(self):
                  """Ø§ÛŒØ¬Ø§Ø¯ Ø¨Ø®Ø´ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ"""
                  button_emojis = [self.get_random_emoji('action') for _ in range(3)]
                  
                  buttons = f"""
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   {button_emojis[0]} WEBSITE: ciblcoin.com         â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   {button_emojis[1]} AIRDROP: cbl.ag               â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   {button_emojis[2]} SWAP TOKEN                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  """
                  return buttons
              
              def generate_social_icons(self):
                  """Ø§ÛŒØ¬Ø§Ø¯ Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ"""
                  social_emojis = random.sample(EMOJIS['social'], 4)
                  return f"\n{' | '.join(social_emojis)}\n"
              
              def select_post(self):
                  """Ø§Ù†ØªØ®Ø§Ø¨ Ù¾Ø³Øª Ø¨Ø± Ø§Ø³Ø§Ø³ ÙˆØ±ÙˆØ¯ÛŒ"""
                  try:
                      # Ø§Ú¯Ø± Ø´Ù…Ø§Ø±Ù‡ Ù¾Ø³Øª Ù…Ø´Ø®Øµ Ø´Ø¯Ù‡
                      if self.post_number.isdigit():
                          post_num = int(self.post_number)
                          if 1 <= post_num <= len(POSTS_DATABASE):
                              return POSTS_DATABASE[post_num - 1]
                      
                      # Ø§Ú¯Ø± Ù†ÙˆØ¹ Ù¾Ø³Øª Ù…Ø´Ø®Øµ Ø´Ø¯Ù‡
                      if self.post_type != 'random':
                          filtered_posts = [p for p in POSTS_DATABASE if p['type'] == self.post_type]
                          if filtered_posts:
                              return random.choice(filtered_posts)
                      
                      # Ø§Ù†ØªØ®Ø§Ø¨ ØªØµØ§Ø¯ÙÛŒ
                      return random.choice(POSTS_DATABASE)
                      
                  except Exception as e:
                      print(f"âŒ Error selecting post: {e}")
                      return random.choice(POSTS_DATABASE)
              
              def format_post(self, post_data):
                  """ÙØ±Ù…Øªâ€ŒØ¨Ù†Ø¯ÛŒ Ù¾Ø³Øª Ù†Ù‡Ø§ÛŒÛŒ"""
                  # Ø¨Ø®Ø´ Ø§ØµÙ„ÛŒ Ù¾Ø³Øª
                  main_content = f"{post_data['title']}\n\n{post_data['content']}"
                  
                  # Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ
                  buttons = self.generate_buttons_section()
                  
                  # Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ
                  social_icons = self.generate_social_icons()
                  
                  # Ù‡Ø´ØªÚ¯â€ŒÙ‡Ø§
                  hashtags = post_data.get('hashtags', '')
                  additional_hashtags = random.sample(HASHTAGS, 3)
                  all_hashtags = f"{hashtags} {' '.join(additional_hashtags)}"
                  
                  # ØªØ±Ú©ÛŒØ¨ Ù†Ù‡Ø§ÛŒÛŒ
                  final_post = f"""{main_content}

    ðŸ”¥ QUICK ACTIONS:
    {buttons}
    {social_icons}
    {all_hashtags}
    
    â° Posted: {datetime.now().strftime('%Y-%m-%d %H:%M UTC')}
    """
                  return final_post
              
              def send_to_telegram(self, message):
                  """Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…"""
                  try:
                      url = f"{self.base_url}/sendMessage"
                      payload = {
                          'chat_id': self.channel_id,
                          'text': message,
                          'parse_mode': 'HTML',
                          'disable_web_page_preview': False
                      }
                      
                      response = requests.post(url, json=payload, timeout=30)
                      response.raise_for_status()
                      
                      result = response.json()
                      if result.get('ok'):
                          message_id = result['result']['message_id']
                          print(f"âœ… Post published successfully!")
                          print(f"ðŸ“ Message ID: {message_id}")
                          return message_id
                      else:
                          print(f"âŒ Telegram API error: {result.get('description')}")
                          return None
                          
                  except requests.exceptions.RequestException as e:
                      print(f"âŒ Network error: {e}")
                      return None
                  except Exception as e:
                      print(f"âŒ Unexpected error: {e}")
                      return None
              
              def log_publication(self, post_data, message_id):
                  """Ø«Ø¨Øª Ù„Ø§Ú¯ Ø§Ù†ØªØ´Ø§Ø±"""
                  log_entry = {
                      'timestamp': datetime.now().isoformat(),
                      'post_id': post_data['id'],
                      'post_type': post_data['type'],
                      'message_id': message_id,
                      'channel': '@CiBLofficial',
                      'trigger': 'scheduled' if self.post_number == '0' and self.post_type == 'random' else 'manual'
                  }
                  
                  print(f"ðŸ“Š Publication logged: {json.dumps(log_entry, indent=2)}")
                  
                  # Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± ÙØ§ÛŒÙ„ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
                  try:
                      with open('publication_log.json', 'a') as f:
                          f.write(json.dumps(log_entry) + '\n')
                  except:
                      pass
              
              def run(self):
                  """Ø§Ø¬Ø±Ø§ÛŒ Ø§ØµÙ„ÛŒ"""
                  print(f"{self.get_random_emoji()} Starting CIBL Telegram Poster")
                  print(f"ðŸ“… {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
                  
                  # Ø¨Ø±Ø±Ø³ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
                  if not self.bot_token:
                      print("âŒ TELEGRAM_BOT_TOKEN is not set!")
                      sys.exit(1)
                  if not self.channel_id:
                      print("âŒ TELEGRAM_CHANNEL_ID is not set!")
                      sys.exit(1)
                  
                  # Ø§Ù†ØªØ®Ø§Ø¨ Ù¾Ø³Øª
                  print("ðŸŽ¯ Selecting post...")
                  post_data = self.select_post()
                  print(f"ðŸ“„ Selected post #{post_data['id']} - Type: {post_data['type']}")
                  
                  # ÙØ±Ù…Øªâ€ŒØ¨Ù†Ø¯ÛŒ Ù¾Ø³Øª
                  print("âœ¨ Formatting post...")
                  formatted_message = self.format_post(post_data)
                  
                  # Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´
                  print("\nðŸ“‹ Post Preview:")
                  print("=" * 50)
                  print(formatted_message[:500] + "...")
                  print("=" * 50)
                  
                  # Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…
                  print("\nðŸ“¤ Sending to Telegram...")
                  message_id = self.send_to_telegram(formatted_message)
                  
                  if message_id:
                      # Ø«Ø¨Øª Ù„Ø§Ú¯
                      self.log_publication(post_data, message_id)
                      print(f"\n{self.get_random_emoji()} Process completed successfully!")
                      return True
                  else:
                      print(f"\nâŒ Failed to send message")
                      return False
          
          if __name__ == "__main__":
              poster = CIBLTelegramPoster()
              success = poster.run()
              sys.exit(0 if success else 1)
          EOF
          
          echo "âœ… Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ØªÙ„Ú¯Ø±Ø§Ù… Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯"
          chmod +x telegram_poster.py

      - name: Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù¾Ø³Øªâ€ŒÚ©Ù†Ù†Ø¯Ù‡
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHANNEL_ID: ${{ secrets.TELEGRAM_CHANNEL_ID }}
          POST_NUMBER: ${{ inputs.post_number }}
          POST_TYPE: ${{ inputs.post_type }}
        run: |
          echo "ðŸš€ Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù¾Ø³Øªâ€ŒÚ©Ù†Ù†Ø¯Ù‡..."
          python telegram_poster.py
          
      - name: Ø§Ø±Ø³Ø§Ù„ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ù…ÙˆÙÙ‚ÛŒØª
        if: success()
        run: |
          echo "ðŸŽ‰ Ù¾Ø³Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø± Ú©Ø§Ù†Ø§Ù„ ØªÙ„Ú¯Ø±Ø§Ù… Ù…Ù†ØªØ´Ø± Ø´Ø¯!"
          echo "ðŸ“… Ø²Ù…Ø§Ù†: $(date)"
          echo "ðŸ“¢ Ú©Ø§Ù†Ø§Ù„: @CiBLofficial"
          echo "ðŸ”— Ø±Ø¨Ø§Øª: @CIBtokenBot"

      - name: Ø§Ø±Ø³Ø§Ù„ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø®Ø·Ø§
        if: failure()
        run: |
          echo "âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§Ù†ØªØ´Ø§Ø± Ù¾Ø³Øª!"
          echo "ðŸ•’ Ø²Ù…Ø§Ù†: $(date)"
          echo "ðŸ” Ù„Ø·ÙØ§Ù‹ Ù„Ø§Ú¯ Ø¨Ø§Ù„Ø§ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯"
          echo "ðŸ“‹ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯:"
          echo "1. ØªÙˆÚ©Ù† Ø±Ø¨Ø§Øª ØµØ­ÛŒØ­ Ø§Ø³ØªØŸ"
          echo "2. Ø¢ÛŒØ¯ÛŒ Ú©Ø§Ù†Ø§Ù„ Ø¨Ø§ Ø¹Ù„Ø§Ù…Øª Ù…Ù†ÙÛŒ Ø§Ø³ØªØŸ"
          echo "3. Ø±Ø¨Ø§Øª Ø¯Ø± Ú©Ø§Ù†Ø§Ù„ Ø§Ø¯Ù…ÛŒÙ† Ø§Ø³ØªØŸ"